syntax = "proto3";

// 클라이언트 -> 서버: 회원가입 요청 패킷
message C2S_SignUpRequest {
    string id = 1;
    string password = 2;
}

// 서버 -> 클라이언트: 회원가입 응답 패킷
message S2C_SignUpResponse {
    bool success = 1; // true = 성공, false = 실패
    string message = 2; // 성공/실패 출력 메세지 
    uint32 fail_code = 3;
    // GlobalFailCode fail_code = 3;
    // 추후 code 번호 외에 추가로 보내야할 소요가 생기면 클래스 생성
}

// 클라이언트 -> 서버: 로그인 요청 패킷
message C2S_SignInRequest {
    string id = 1;
    string password = 2;
}

// 서버 -> 클라이언트: 로그인 응답 패킷
message S2C_SignInResponse {
    bool success = 1; // true = 성공, false = 실패
    string message = 2; // 성공/실패 시 출력 될 메세지 
    string token = 3; // 성공 시 발급되는 JWT 토큰
    uint32 fail_code = 4;
    // GlobalFailCode fail_code = 4;
    // 추후 code 번호 외에 추가로 보내야할 소요가 생기면 클래스 생성
}

// 클라이언트 -> 서버: 대결 신청 요청 패킷
message C2S_MatchRequest {
    string id = 1;
		
}

// 서버 -> 클라이언트: 대결 시작 통지 패킷
message S2C_MatchFoundNotification {
		// string targetId = 1 // 상대 id
    int64 timestamp = 1; // 메시지 생성 타임스탬프 (Unix 타임스탬프)
		// repeated UserData users = 2;
		// message UserData {
		// 	string id = 1;
		// 	uint32 gold = 2;
		// 	uint32 base_hp = 3;
		// 	uint32 monsterLevel = 4;
			
		// 	repeated TowerCoordinates coords = 5;
		// 	message TowerCoordinates { // ??
		// 		uint32 x = 1;
		// 		uint32 y = 2;
		// 	}
			
		// }
}

message C2S_TowerPurchaseRequest {

}

message S2C_TowerPurchaseResponse {

}

message C2S_TowerAttackRequest {

}

message S2C_TowerAttackResponse {

}

message S2C_TowerAttackNotification {
    
}

message C2S_MonsterSpawnRequest {

}

message S2C_MonsterSpawnResponse {

}

message S2C_MonsterSpawnNotification {

}

message C2S_MonsterKillRequest {

}

message S2C_MonsterKillResponse {

}

message S2C_MonsterKillNotification {

}

message C2S_BaseAttackedRequest {

}

message S2C_BaseAttackedResponse {

}

message S2C_GameOverNotification {

}

message C2S_GameEndRequest {
    
}

message GamePacket {
    oneof payload {
        C2S_SignUpRequest signUpRequest = 1;
        S2C_SignUpResponse signUpResponse = 2;
        C2S_SignInRequest signInRequest = 3;
        S2C_SignInResponse signInResponse = 4;

        C2S_MatchRequest matchRequest = 5;
        S2C_MatchFoundNotification matchFoundNotification = 6;

        C2S_TowerPurchaseRequest towerPurchaseRequest = 7;
        S2C_TowerPurchaseResponse towerPurchseResponse = 8;
        S2C_TowerPurchaseNotification towerPurchaseNotification = 9;

        C2S_TowerAttackRequest towerAttackRequest = 10;
        S2C_TowerAttackResponse towerAttackResponse = 11;
        S2C_TowerAttackNotification towerAttackNotification = 12;

        C2S_MonsterSpawnRequest monsterSpawnRequest = 13;
        S2C_MonsterSpawnResponse monsterSpawnResponse = 14;
        S2C_MonsterSpawnNotification monsterSpawnNotification = 15;

        C2S_MonsterKillRequest monsterKillRequest = 16;
        S2C_MonsterKillResponse monsterKillResponse = 17;
        S2C_MonsterKillNotification monsterKillNotification = 18;

        C2S_BaseAttackedRequest baseAttackedRequest = 19;
        S2C_BaseAttackedResponse baseAttackedResponse = 20;

        S2C_GameOverNotification gameOverNotification = 21;
        C2S_GameEndRequest gameEndRequest = 22;
    }
}